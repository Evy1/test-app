{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/nmc/Desktop/auth-app/src/components/Tasks/Tasks.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Card, Container, Modal, Button } from \"react-bootstrap\";\nimport styles from \"./Tasks.module.css\";\nimport { useAuth } from \"../../context/AuthContext\"; // import results from \"../results\";\n\nimport Buttons from \"../Buttons/Buttons\";\nimport firebase from \"../../firebase\";\nimport Spinner from \"../Spiner/Spiner\";\n\nfunction Tasks() {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const {\n    currentUser\n  } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [show, setShow] = useState(false);\n  const inputEl = useRef(null);\n\n  const handleClose = () => {\n    inputEl.current;\n    setShow(false);\n  };\n\n  const handleShow = () => setShow(true);\n\n  useEffect(() => {\n    const unsubscribe = firebase.database().ref(\"task\").on(\"value\", snapshot => {\n      const fetchedResults = [];\n\n      if (snapshot) {\n        snapshot.forEach(snap => {\n          fetchedResults.push({ ...snap.val(),\n            id: snap.key\n          });\n        });\n        setItems(fetchedResults);\n        setLoading(false);\n      } else {\n        return;\n      }\n    }); // const abortController = new AbortController();\n    // const signal = abortController.signal;\n    // results.get(\"/task.json\", { signal: signal }).then((response) => {\n    //   const fetchedResults = [];\n    //   for (let key in response.data) {\n    //     fetchedResults.unshift({\n    //       ...response.data[key],\n    //       id: key,\n    //     });\n    //   }\n    //   setItems(fetchedResults);\n    //   setLoading(false);\n    // });\n    // return function cleanUp() {\n    //   abortController.abort();\n    // };\n\n    return unsubscribe;\n  }, []);\n\n  function deleteItem(id) {\n    const db = firebase.database().ref(\"task/\" + id);\n    db.remove();\n  }\n\n  let info = /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 14\n  }, this);\n\n  if (!loading) {\n    info = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row d-flex justify-content-center text-center pt-4\",\n      children: items.map(result => result.user === currentUser.uid && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-4\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: styles.Card,\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: result.date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: styles.TaskTitle,\n              children: result.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: result.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center\",\n              children: [/*#__PURE__*/_jsxDEV(Buttons, {\n                click: () => firebase.database().ref(\"task/\" + result.id).update({\n                  status: \"done\"\n                }),\n                class: styles.DoneBtn,\n                disable: result.status === \"done\",\n                children: \"Done\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Buttons, {\n                click: () => deleteItem(result.id),\n                class: styles.DeleteBtn,\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Buttons, {\n                class: styles.EditBtn,\n                click: handleShow,\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)\n      }, result.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [info, /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Modal heading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: \"Woohoo, you're reading this text in a modal!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleClose,\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Tasks, \"nz8xiV+GRzncyTM/jCUcfyvw01I=\", false, function () {\n  return [useAuth];\n});\n\n_c = Tasks;\nexport default Tasks;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tasks\");","map":{"version":3,"sources":["/home/nmc/Desktop/auth-app/src/components/Tasks/Tasks.js"],"names":["React","useState","useEffect","useRef","Card","Container","Modal","Button","styles","useAuth","Buttons","firebase","Spinner","Tasks","items","setItems","currentUser","loading","setLoading","show","setShow","inputEl","handleClose","current","handleShow","unsubscribe","database","ref","on","snapshot","fetchedResults","forEach","snap","push","val","id","key","deleteItem","db","remove","info","map","result","user","uid","date","TaskTitle","title","content","update","status","DoneBtn","DeleteBtn","EditBtn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Card, Container, Modal, Button } from \"react-bootstrap\";\nimport styles from \"./Tasks.module.css\";\nimport { useAuth } from \"../../context/AuthContext\";\n// import results from \"../results\";\nimport Buttons from \"../Buttons/Buttons\";\nimport firebase from \"../../firebase\";\nimport Spinner from \"../Spiner/Spiner\";\n\nfunction Tasks() {\n  const [items, setItems] = useState([]);\n  const { currentUser } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [show, setShow] = useState(false);\n  const inputEl = useRef(null);\n\n  const handleClose = () => {\n    inputEl.current\n    setShow(false);\n  }\n    \n  const handleShow = () => setShow(true);\n\n  useEffect(() => {\n    const unsubscribe = firebase\n      .database()\n      .ref(\"task\")\n      .on(\"value\", (snapshot) => {\n        const fetchedResults = [];\n        if (snapshot) {\n          snapshot.forEach((snap) => {\n            fetchedResults.push({\n              ...snap.val(),\n              id: snap.key,\n            });\n          });\n          setItems(fetchedResults);\n          setLoading(false);\n        } else {\n          return;\n        }\n      });\n    // const abortController = new AbortController();\n    // const signal = abortController.signal;\n    // results.get(\"/task.json\", { signal: signal }).then((response) => {\n    //   const fetchedResults = [];\n    //   for (let key in response.data) {\n    //     fetchedResults.unshift({\n    //       ...response.data[key],\n    //       id: key,\n    //     });\n    //   }\n    //   setItems(fetchedResults);\n    //   setLoading(false);\n    // });\n    // return function cleanUp() {\n    //   abortController.abort();\n    // };\n    return unsubscribe;\n  }, []);\n\n  function deleteItem(id) {\n    const db = firebase.database().ref(\"task/\" + id);\n    db.remove();\n  }\n\n  let info = <Spinner />;\n  if (!loading) {\n    info = (\n      <div className=\"row d-flex justify-content-center text-center pt-4\">\n        {items.map(\n          (result) =>\n            result.user === currentUser.uid && (\n              <div className=\"col-12 col-md-4\" key={result.id}>\n                <Card className={styles.Card}>\n                  <Card.Body>\n                    <div>{result.date}</div>\n                    <h2 className={styles.TaskTitle}>{result.title}</h2>\n                    <div>\n                      <p>{result.content}</p>\n                    </div>\n                    <div className=\"d-flex justify-content-center\">\n                      <Buttons\n                        click={() =>\n                          firebase\n                            .database()\n                            .ref(\"task/\" + result.id)\n                            .update({ status: \"done\" })\n                        }\n                        class={styles.DoneBtn}\n                        disable={result.status === \"done\"}\n                      >\n                        Done\n                      </Buttons>\n                      <Buttons\n                        click={() => deleteItem(result.id)}\n                        class={styles.DeleteBtn}\n                      >\n                        Delete\n                      </Buttons>\n                      <Buttons class={styles.EditBtn} click={handleShow}>Edit</Buttons>\n                    </div>\n                  </Card.Body>\n                </Card>\n              </div>\n            )\n        )}\n      </div>\n    );\n  }\n  return (\n    <Container>\n      {info}\n      <Modal show={show} onHide={handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title>Modal heading</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>Woohoo, you're reading this text in a modal!</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>\n            Close\n          </Button>\n          <Button variant=\"primary\" onClick={handleClose}>\n            Save Changes\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </Container>\n  );\n}\nexport default Tasks;\n"]},"metadata":{},"sourceType":"module"}